// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.30;

import '../src/deployer/Deployer.sol';
import {Script, console} from 'forge-std/Script.sol';

contract DeployStartaleAccountImplementationCreate3 is Script {
  Deployer deployerInstance;
  address entryPoint;
  mapping(uint256 => uint256) public DEPLOYMENT_CHAIN_GAS_PRICES;
  address public constant eEeEeAddress = address(0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE);

  error NoGasPriceSet();
  error ContractDeploymentFailed();

  function setUp() public {
    deployerInstance = Deployer(vm.envAddress('DEPLOYER_CONTRACT_ADDRESS')); // Set Deployer contract
    // EntryPoint v0.7 address
    entryPoint = vm.parseAddress('0x0000000071727De22E5E9d8BAf0edAc6f37da032');
    DEPLOYMENT_CHAIN_GAS_PRICES[1946] = 0.002 gwei;
    DEPLOYMENT_CHAIN_GAS_PRICES[1868] = 0.001 gwei;
  }

  function run() public {
    uint256 deployerPrivateKey = vm.envUint('PRIVATE_KEY');

    string memory contractName = 'StartaleSmartAccount';
    string memory saltString = vm.envString('STARTALE_SMART_ACCOUNT_IMPLEMENTATION_SALT');

    bytes memory deployedBytecode =
      hex'610180806040523461031b5761630e803803809161001d8285610387565b833981019060608183031261031b57610035816103aa565b90610042602082016103aa565b604082015190916001600160401b03821161031b57019280601f8501121561031b5783516001600160401b038111610373576040519461008c601f8301601f191660200187610387565b81865260208601926020838301011161031b57815f926020809301855e86010152306080524660a05260409360a085516100c68782610387565b600881526020810190675374617274616c6560c01b82528751916100ea8984610387565b60058352640312e302e360dc1b6020938401529051902060c08190527f06c015bd22b4c69690933c1058878ebdfef31f9aaae40bbe86d8a09fe1b2972c60e081905288517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f815280840192909252818901524660608201523060808201529190912061010052855163ecd0596160e01b8152600160048201526001600160a01b038516939181602481875afa908115610369575f9161032e575b501561031f57823b1561031b576044925f928388519586809581946306d61fe760e41b8352602060048401525180918160248501528484015e8181018301849052601f01601f191681010301925af1801561031157610301575b506101405230610160526001600160a01b038116156102f2576101205251615f4f90816103bf8239608051816158ff015260a05181615922015260c05181615992015260e051816159b8015261010051816158de0152610120518181816102730152818161048f01528181610643015281816108d601528181610a1b015281816110e8015281816112ef015281816113be015281816115bd015281816116f60152818161175801528181611a2301528181611a9c015261240301526101405181818161227b015281816127690152818161308701528181613dc101526155eb015261016051818181610bc601526123d40152f35b6307e355bf60e31b5f5260045ffd5b5f61030b91610387565b5f6101fe565b84513d5f823e3d90fd5b5f80fd5b631c4f83bb60e31b5f5260045ffd5b90506020813d602011610361575b8161034960209383610387565b8101031261031b5751801515810361031b575f6101a4565b3d915061033c565b87513d5f823e3d90fd5b634e487b7160e01b5f52604160045260245ffd5b601f909101601f19168101906001600160401b0382119082101761037357604052565b51906001600160a01b038216820361031b5756fe60806040526004361015610015575b36612a8057005b5f3560e01c806203f25f1461023357806301ffc9a71461022e5780630a664dba14610229578063112d3a7d146102245780631626ba7e1461021f57806319822f7c1461021a578063392e53cd1461021557806346f8034414610210578063481ddd231461020b578063492a88a2146102065780634a58db19146102015780634b6a1419146101fc5780634d44560d146101f75780634f1ef286146101f257806352d1902d146101ed5780635bfeadbb146101e85780635faac46b146101e3578063619810d4146101de57806384b0196e146101d95780638626e88b146101d45780638dd7712f146101cf5780639517e29f146101ca5780639cfd7cff146101c5578063a71763a8146101c0578063aaf10f42146101bb578063b0d691fe146101b6578063b46b61a9146101b1578063c399ec88146101ac578063d03c7914146101a7578063d691c964146101a2578063d86f2b3c1461019d578063e9ae5c5314610198578063ea5f61d0146101935763f2dc691d0361000e57611c57565b611b5b565b611a85565b6119c4565b611895565b611789565b611733565b61171a565b6116d7565b611692565b6115a9565b61154a565b6113aa565b6112b6565b61121e565b611147565b6110c3565b610f1d565b610c21565b610bb3565b610a8a565b6109f8565b6108fe565b6108c4565b61072d565b6106af565b6105e7565b6105cd565b61043e565b610403565b6103b7565b6102f0565b6102b5565b61024e565b6001600160e01b031981160361024a57565b5f80fd5b602036600319011261024a576102aa60043561026981610238565b6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016331480156102ac575b6102a590611c75565b612e30565b005b5033301461029c565b3461024a57602036600319011261024a5760206102dc6004356102d781610238565b611c8b565b6040519015158152f35b5f91031261024a57565b3461024a575f36600319011261024a5760206001600160a01b035f516020615e6f5f395f51905f5254166001600160a01b0360405191168152f35b6001600160a01b0381160361024a57565b35906103478261032b565b565b9181601f8401121561024a5782359167ffffffffffffffff831161024a576020838186019501011161024a57565b606060031982011261024a57600435916024356103938161032b565b916044359067ffffffffffffffff821161024a576103b391600401610349565b9091565b3461024a5760206102dc6103ca36610377565b92919091612fac565b90604060031983011261024a57600435916024359067ffffffffffffffff821161024a576103b391600401610349565b3461024a57602061041c610416366103d3565b91611f14565b6040516001600160e01b03199091168152f35b908161012091031261024a5790565b3461024a57606036600319011261024a5760043567ffffffffffffffff811161024a5761047261052691369060040161042f565b60206104ee6024356104f960443580956104b66001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163314611c75565b6104f36104c33683612077565b9586928881013590600382901a60f81b600160f81b1461059e575b5060401c6001600160a01b031690565b613074565b936132df565b61010084929401525f6001600160a01b03604051809881968295639700320360e01b84526004840161222c565b0393165af190811561059957610555925f92610568575b5080610559575b506040519081529081906020820190565b0390f35b5f80808093335af1505f610544565b81925061058c9060203d602011610592575b6105848183611eaa565b81019061218a565b9161053d565b503d61057a565b611f09565b6105ba6105b3826101006105c1940190612157565b908a6131ce565b3691612026565b6101008501525f6104de565b3461024a575f36600319011261024a5760206102dc612260565b602036600319011261024a5760043567ffffffffffffffff811161024a573660238201121561024a5780600401359067ffffffffffffffff821161024a576024810190602436918460051b01011161024a576001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016331480156106a6575b61067590611c75565b5f5b82811061068057005b806106a061069160019386866133e6565b3561069b81610238565b613719565b01610677565b5033301461066c565b3461024a57602036600319011261024a57604060206106f66004356106d381610238565b63ffffffff60e01b165f525f516020615f0f5f395f51905f5260205260405f2090565b82519061070282611e89565b54906001600160a01b0382169182825260ff60f81b9060581b16928391015282519182526020820152f35b3461024a575f36600319011261024a573033036108b55761074c6159ee565b610754615a61565b6001600160a01b0361077a6001600160a01b035f516020615e6f5f395f51905f52541690565b166108a7575b6107a66107a16001600160a01b035f516020615f2f5f395f51905f52541690565b6144d8565b6107cc6107c76001600160a01b035f516020615e2f5f395f51905f52541690565b614524565b5f516020615eaf5f395f51905f52545f5b818110610808576107ec614570565b6107f46145e9565b6107fc6146a0565b60405160018152602090f35b806108a1610817600193612ca0565b90549060031b1c60e01b61085d6040519161083183611e89565b5f83525f602084015263ffffffff60e01b165f525f516020615f0f5f395f51905f5260205260405f2090565b8151815460209093015160ff60a01b60589190911c1674ffffffffffffffffffffffffffffffffffffffffff199093166001600160a01b0390911617919091179055565b016107dd565b6108b05f613822565b610780565b630e93a1f960e01b5f5260045ffd5b5f36600319011261024a575f388180347f00000000000000000000000000000000000000000000000000000000000000005af11561024a57005b602036600319011261024a5760043567ffffffffffffffff811161024a5761092a903690600401610349565b3033036109c5575b6018116109b6575f8091610944614782565b6109a9575b602080820135820180358060405193849301833781018481520391355af461096f61258d565b501561099a57610984610980614782565b1590565b61098a57005b6102aa610995612260565b6133f6565b631b79777760e11b5f5260045ffd5b6109b16147a4565b610949565b6307ce216360e51b5f5260045ffd5b7f754fd8b321c4649cb777ae6fdce7e89e9cceaa31a4f639795c7807eb7f1a27005c6109325763aed595955f526004601cfd5b604036600319011261024a57600435610a108161032b565b5f80604460243593827f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03811633148015610a81575b610a5690611c75565b60405196879363040b850f60e31b8552600485015260248401525af115610a7957005b3d90815f823efd5b50333014610a4d565b604036600319011261024a57600435610aa28161032b565b60243567ffffffffffffffff811161024a57610ac2903690600401610349565b906001600160a01b03610ae96001600160a01b035f516020615e6f5f395f51905f52541690565b1680610af957506102aa926123b8565b60405163d68f602560e01b81529290915f8480610b1b36343360048501612381565b038183875af1938415610599575f94610b8b575b50610b3b9293946123b8565b803b1561024a57604051630b9dfbed60e11b8152915f918391829084908290610b6790600483016123a7565b03925af1801561059957610b7757005b80610b855f6102aa93611eaa565b806102e6565b610b3b939450610bac903d805f833e610ba48183611eaa565b81019061233b565b9392610b2f565b3461024a575f36600319011261024a57307f000000000000000000000000000000000000000000000000000000000000000003610c145760206040517f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc8152f35b639f03a0265f526004601cfd5b604036600319011261024a5760043567ffffffffffffffff811161024a5780600401906080600319823603011261024a5760243567ffffffffffffffff811161024a57610c75610c7c913690600401610349565b9084613438565b610c986024820135926044610c9082612523565b930190612157565b9290600482148015610ebc575b828115610eb1575b610cb69161252d565b610ccc8383610cc787858484612fac565b612547565b610d06836001600160a01b03165f527f9195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c0760205260405f2090565b5480610d97575050507f2841d18703faaff388732165e48fe431468531b1b1e626b1b7cbcbfc0d79c7409150610d929042610d71826001600160a01b03165f527f9195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c0760205260405f2090565b55604080516001600160a01b03909216825242602083015290918291820190565b0390a1005b610da46203f48082612580565b4210610e0f575050507fcbd44a75f6935b5837022648b6c8487db984701200c5381c7c0f8c2b1d69b9da9150610d929042610d71826001600160a01b03165f527f9195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c0760205260405f2090565b610e1890612570565b4210610ea2577f341347516a9de374859dfda710fa4828b2d48cb57d4fbe4c1149612b8e02276e93610e87915f610e7f866001600160a01b03165f527f9195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c0760205260405f2090565b5583856135cd565b604080519182526001600160a01b03929092166020820152a1005b6303f9796960e11b5f5260045ffd5b600981149150610cad565b5060088214610ca5565b90929192604082016040835281518091526020606084019201905f5b818110610efe575050506001600160a01b036020919416910152565b82516001600160a01b0316845260209384019390920191600101610ee2565b3461024a57604036600319011261024a57600435610f3a8161032b565b6024359060016001600160a01b0382161415806110b1575b6110965781156110875790610f6681614a0b565b610f9e610f915f946001600160a01b03165f525f516020615e4f5f395f51905f5260205260405f2090565b546001600160a01b031690565b6001600160a01b038116801515908161107b575b5080611072575b1561101357611007610f9182610fe461100d94610fd68988614042565b906001600160a01b03169052565b6001600160a01b03165f525f516020615e4f5f395f51905f5260205260405f2090565b93614a3d565b92610f9e565b908360016001600160a01b038416141580611069575b61103f575b815261055560405192839283610ec6565b915061106361105661105084612d76565b83614042565b516001600160a01b031690565b9161102e565b50801515611029565b50828410610fb9565b6001915014155f610fb2565b63f725081760e01b5f5260045ffd5b637c84ecfb60e01b5f526001600160a01b031660045260245ffd5b506110be61098082613f1a565b610f52565b602036600319011261024a576102aa6004356110de81610238565b6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163314801561111a575b61069b90611c75565b50333014611111565b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b3461024a575f36600319011261024a576111866111946111656137dc565b604092919251938493600f60f81b855260e0602086015260e0850190611123565b908382036040850152611123565b4660608301523060808301525f60a083015281810360c083015260206060519182815201906080905f5b8181106111cc575050500390f35b82518452859450602093840193909201916001016111be565b60206040818301928281528451809452019201905f5b8181106112085750505090565b82518452602093840193909201916001016111fb565b3461024a575f36600319011261024a576040518060205f516020615eef5f395f51905f52549182815201905f516020615eef5f395f51905f525f527fdb3901c0862740f848a4aebebd6b3d645e6b3bc6adf2cf46e83a846b3a343933905f5b8181106112a0576105558561129481870382611eaa565b604051918291826111e5565b825484526020909301926001928301920161127d565b604036600319011261024a5760043567ffffffffffffffff811161024a576112e290369060040161042f565b6113166001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163314611c75565b6001600160a01b0361133c6001600160a01b035f516020615e6f5f395f51905f52541690565b168061134c57506102aa906125bc565b60405163d68f602560e01b8152915f838061136c36343360048501612381565b038183865af1928315610599575f9361138a575b50610b3b906125bc565b610b3b9193506113a3903d805f833e610ba48183611eaa565b9290611380565b6113b336610377565b906001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001633148015611541575b6113f090611c75565b6113fb610980613369565b611534575b6001600160a01b038316156115255760018403611452575f516020615e0f5f395f51905f5293916114319184615509565b604080519182526001600160a01b0390921660208201529081908101610d92565b60028403611479575f516020615e0f5f395f51905f5293916114749184615409565b611431565b6003840361149b575f516020615e0f5f395f51905f5293916114749184614e74565b600484036114bd575f516020615e0f5f395f51905f5293916114749184614d20565b60088414801561151b575b156114e857839161147491845f516020615e0f5f395f51905f5296614b68565b83611507575f516020615e0f5f395f51905f5293916114749184614a62565b6304c1896960e11b5f52600484905260245ffd5b50600984146114c8565b635316c18d60e01b5f5260045ffd5b61153c6146a0565b611400565b503330146113e7565b3461024a575f36600319011261024a5761055560405161156b604082611eaa565b601c81527f7374617274616c652e736d6172742d6163636f756e742e312e302e30000000006020820152604051918291602083526020830190611123565b6115b236610377565b916001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001633148015611689575b6115ef90611c75565b6001600160a01b036116156001600160a01b035f516020615e6f5f395f51905f52541690565b168061162557506102aa93612618565b60405163d68f602560e01b815293909290915f858061164936343360048501612381565b038183885af1948515610599575f95611669575b50610b3b939495612618565b610b3b949550611682903d805f833e610ba48183611eaa565b949361165d565b503330146115e6565b3461024a575f36600319011261024a5760207f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc546001600160a01b0360405191168152f35b3461024a575f36600319011261024a5760206040516001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000168152f35b3461024a57602061041c61172d366103d3565b916126f6565b3461024a575f36600319011261024a57306020526370a082315f52602080806024601c7f00000000000000000000000000000000000000000000000000000000000000005afa601f3d1116815102604051908152f35b3461024a57602036600319011261024a576105556004358060081b60ff60f81b82161591821561181e575b8215611809575b50816117d5575b5060405190151581529081906020820190565b6001600160f81b0319811615915081156117f1575b505f6117c2565b6001600160f81b031916600160f81b1490505f6117ea565b6001600160f81b03199081161491505f6117bb565b6001600160f81b03198116600160f81b1492506117b4565b602081016020825282518091526040820191602060408360051b8301019401925f915b83831061186857505050505090565b9091929394602080611886600193603f198682030187528951611123565b97019301930191939290611859565b61189e366103d3565b916118a833613f5a565b156119b1576001600160a01b036118d36001600160a01b035f516020615e6f5f395f51905f52541690565b16806118f45750916118e891610555936127b5565b60405191829182611836565b90926040519263d68f602560e01b84525f848061191636343360048501612381565b038183875af1938415610599575f94611991575b506119369293946127b5565b90803b1561024a57604051630b9dfbed60e11b8152925f91849182908490829061196390600483016123a7565b03925af1918215610599576105559261197d575b506118e8565b80610b855f61198b93611eaa565b5f611977565b6119369394506119aa903d805f833e610ba48183611eaa565b939261192a565b635c93ff2f60e11b5f523360045260245ffd5b3461024a57602036600319011261024a5760043577ffffffffffffffffffffffffffffffffffffffffffffffff811680910361024a5760405190631aab3f0d60e11b825230600483015260248201526020816044816001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000165afa801561059957610555915f91611a6657506040519081529081906020820190565b611a7f915060203d602011610592576105848183611eaa565b5f610544565b611a8e366103d3565b90611ac36001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163314611c75565b6001600160a01b03611ae96001600160a01b035f516020615e6f5f395f51905f52541690565b1680611af957506102aa926128fb565b60405163d68f602560e01b81529290915f8480611b1b36343360048501612381565b038183875af1938415610599575f94611b3b575b50610b3b9293946128fb565b610b3b939450611b54903d805f833e610ba48183611eaa565b9392611b2f565b3461024a57604036600319011261024a57600435611b788161032b565b6024359060016001600160a01b038216141580611c45575b6110965781156110875790611ba481614a0b565b611bcf610f915f946001600160a01b03165f525f516020615ecf5f395f51905f5260205260405f2090565b6001600160a01b0381168015159081611c39575b5080611c30575b1561101357611007610f9182611c07611c2a94610fd68988614042565b6001600160a01b03165f525f516020615ecf5f395f51905f5260205260405f2090565b92611bcf565b50828410611bea565b6001915014155f611be3565b50611c5261098082613f5a565b611b90565b3461024a57602036600319011261024a5760206102dc600435612a03565b15611c7c57565b635629665f60e11b5f5260045ffd5b6001600160e01b03198116630a85bd0160e11b8114908115611d68575b8115611d57575b8115611d46575b8115611d35575b8115611d24575b8115611d13575b50611d0d576001600160e01b0319165f9081527f9195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c04602052604090205460ff1690565b50600190565b635f0eb67b60e11b1490505f611ccb565b630b135d3f60e11b81149150611cc4565b634b6a141960e01b81149150611cbd565b630b135d3f60e11b81149150611cb6565b6301ffc9a760e01b81149150611caf565b630271189760e51b81149150611ca8565b634e487b7160e01b5f52601160045260245ffd5b906177398202918083046177391490151715611da557565b611d79565b9060141161024a5790601490565b909291928360141161024a57831161024a57601401916013190190565b9060041161024a5790600490565b909291928360041161024a57831161024a57600401916003190190565b909291928360051161024a57831161024a57600501916004190190565b9093929384831161024a57841161024a578101920390565b356bffffffffffffffffffffffff19811692919060148210611e55575050565b6bffffffffffffffffffffffff1960149290920360031b82901b16169150565b634e487b7160e01b5f52604160045260245ffd5b6040810190811067ffffffffffffffff821117611ea557604052565b611e75565b90601f8019910116810190811067ffffffffffffffff821117611ea557604052565b9081602091031261024a5751611ee181610238565b90565b611ee193926001600160a01b0360609316825260208201528160408201520190611123565b6040513d5f823e3d90fd5b918015611fcd575b90611f56611f7d93611f508480611f4a6104ee611f44611f3e60209a8a611daa565b90611e35565b60601c90565b95611db8565b91613120565b91906001600160a01b03604051809681958294637aa8f17760e11b84523360048501611ee4565b0392165afa5f9181611f9c575b50611ee157506001600160e01b031990565b611fbf91925060203d602011611fc6575b611fb78183611eaa565b810190611ecc565b905f611f8a565b503d611fad565b611fdb61ffff821904611d8d565b8303611f1c5790611ee1926126f6565b6040519061034761012083611eaa565b60405190610347604083611eaa565b67ffffffffffffffff8111611ea557601f01601f191660200190565b9291926120328261200a565b916120406040519384611eaa565b82948184528183011161024a578281602093845f960137010152565b9080601f8301121561024a57816020611ee193359101612026565b9190916101208184031261024a5761208d611feb565b926120978261033c565b845260208201356020850152604082013567ffffffffffffffff811161024a57816120c391840161205c565b6040850152606082013567ffffffffffffffff811161024a57816120e891840161205c565b60608501526080820135608085015260a082013560a085015260c082013560c085015260e082013567ffffffffffffffff811161024a578161212b91840161205c565b60e085015261010082013567ffffffffffffffff811161024a5761214f920161205c565b610100830152565b903590601e198136030182121561024a570180359067ffffffffffffffff821161024a5760200191813603831361024a57565b9081602091031261024a575190565b80516001600160a01b03168252611ee1916020820151602082015261010061221a6121ea6121d860408601516101206040870152610120860190611123565b60608601518582036060870152611123565b6080850151608085015260a085015160a085015260c085015160c085015260e085015184820360e0860152611123565b92015190610100818403910152611123565b929190612243602091604086526040860190612199565b930152565b9081602091031261024a5751801515810361024a5790565b60405163d60b347f60e01b81523060048201526020816024817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa908115610599575f916122c6575b5080156122bd5790565b50611ee1613369565b6122e8915060203d6020116122ee575b6122e08183611eaa565b810190612248565b5f6122b3565b503d6122d6565b81601f8201121561024a5780519061230c8261200a565b9261231a6040519485611eaa565b8284526020838301011161024a57815f9260208093018386015e8301015290565b9060208282031261024a57815167ffffffffffffffff811161024a57611ee192016122f5565b908060209392818452848401375f828201840152601f01601f1916010190565b611ee193926001600160a01b03606093168252602082015281604082015201905f612361565b906020611ee1928181520190611123565b9190916001600160a01b038116908115612514573b15612514577f00000000000000000000000000000000000000000000000000000000000000003014610c14576001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163314801561250b575b61243590611c75565b61243d614782565b6124fc573d5f526352d1902d6001527f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc602060016004601d855afa51036124ee57807fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b5f80a281817f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc556124d057505050565b815f926040519485378338925af4156124e65750565b3d5f823e3d90fd5b6355299b496001526004601dfd5b63dc3b837960e01b5f5260045ffd5b5033301461242c565b63325c055b60e21b5f5260045ffd5b35611ee18161032b565b156125355750565b63041c38b360e41b5f5260045260245ffd5b15612550575050565b6001600160a01b039250635f300b3960e11b5f526004521660245260445ffd5b90620151808201809211611da557565b91908201809211611da557565b3d156125b7573d9061259e8261200a565b916125ac6040519384611eaa565b82523d5f602084013e565b606090565b6125ca906060810190612157565b8060041161024a576040515f9283929060031982019060040183378101826003198201528160031991030190305af461260161258d565b501561260957565b632b3f6d1160e21b5f5260045ffd5b90917f341347516a9de374859dfda710fa4828b2d48cb57d4fbe4c1149612b8e02276e9361264d8484610cc784868484612fac565b600183036126895761265f9184613bc2565b612667613cad565b604080519182526001600160a01b03909216602082015290819081015b0390a1565b600283036126a05761269b91846139fa565b612667565b600383036126b25761269b9184613856565b6004831480156126ec575b80156126e2575b6126d0575b5050612667565b6126db9183856135cd565b5f806126c9565b50600983146126c4565b50600883146126bd565b60015f9081525f516020615e4f5f395f51905f526020525f516020615e8f5f395f51905f52546001600160a01b031694939291905b6001600160a01b03861680151590816127a9575b50156127615761275584848461275b948a613e1f565b95613ed5565b9461272b565b61278d9495507f0000000000000000000000000000000000000000000000000000000000000000613e1f565b6001600160e01b03198116611ee157506001600160e01b031990565b6001915014155f61273f565b600881901b9291906001600160f81b031981166127d8575090611ee1929161416c565b6001600160f81b03198116600160f81b036127f9575090611ee1929161407c565b6001600160f81b0319808216036128e357509061281591615648565b909161281f613fb2565b936001600160f81b0319811661285157509161283a92615687565b61284382614035565b5261284d81614035565b5090565b6001600160f81b03198116600160f81b036128c75750818361287292615662565b61287b85614035565b521561288657505090565b7f5bd4c60b4b38b664d8fb5944eb974e3d85083d79afe5ce934ccabcc913707c10916128c16128b485614035565b5160405193849384614056565b0390a190565b6308c3ee0360e11b5f526001600160f81b03191660045260245ffd5b632e5bf3f960e21b5f5260ff60f81b1660045260245ffd5b600881901b9291906001600160f81b0319811661291e57509061034792916142b5565b6001600160f81b03198116600160f81b0361293f575090610347929161422c565b6001600160f81b0319808216036128e357509061295b91615648565b929091906001600160f81b0319811661298957505f9083604051938437838338925af4156124e65701604052565b9192916001600160f81b03198116600160f81b036129eb575081836129ad92615662565b9290156129ba575b505050565b6126847f5bd4c60b4b38b664d8fb5944eb974e3d85083d79afe5ce934ccabcc913707c109360405193849384614056565b6308c3ee0360e11b5f5260ff60f81b1660045260245ffd5b60018114908115612a75575b8115612a6a575b8115612a5f575b8115612a54575b8115612a49575b8115612a40575b50612a3b575f90565b600190565b9050155f612a32565b600981149150612a2b565b600881149150612a24565b600481149150612a1d565b600381149150612a16565b600281149150612a0f565b5f80356001600160e01b031981168083525f516020615f0f5f395f51905f52602052604090922054612ac66001600160a01b0382169160581b6001600160f81b03191690565b906001600160a01b038116612b1857505060e01c63150b7a0263bc197c81821463f23a6e61831417911417612b11576308c63e2760e01b5f526001600160e01b03191660045260245ffd5b5f5260205ff35b5f516020615e6f5f395f51905f52546001600160a01b0316801515926060929084612c35575b6001600160f81b03198116607f60f91b03612be357505f8091612b5f6158af565b90602082519201905afa92612b7261258d565b935b15612bdb57612b86575b825160208401f35b803b1561024a57604051630b9dfbed60e11b8152915f918391829084908290612bb290600483016123a7565b03925af1801561059957612bc7575b80612b7e565b80610b855f612bd593611eaa565b81612bc1565b835160208501fd5b6001600160f81b03198116612c1957505f8091612bfe6158af565b906020825192019034905af192612c1361258d565b93612b74565b632e5bf3f960e21b5f526001600160f81b03191660045260245ffd5b60405163d68f602560e01b81529093505f8180612c5736343360048501612381565b038183875af1908115610599575f91612c72575b5092612b3e565b612c8691503d805f833e610ba48183611eaa565b85612c6b565b634e487b7160e01b5f52603260045260245ffd5b905f516020615eaf5f395f51905f5254821015612cf8575f516020615eaf5f395f51905f525f52600382901c7f83f9b619edc9f43576821d856bc19cf4dff9f52048e1eda1b7c8f88ea11af5ea019160021b601c1690565b612c8c565b905f516020615def5f395f51905f5254821015612cf8575f516020615def5f395f51905f525f52600382901c7f03091a1950aec911b7d69775d400f97274a68b1ca29a0c9bfcd94d200ed924b6019160021b601c1690565b9190918054831015612cf8575f52601c60205f208360031c019260021b1690565b5f19810191908211611da557565b5f516020615def5f395f51905f52548015612dd9575f1901612dc8612db6825f516020615def5f395f51905f52612d55565b63ffffffff82549160031b1b19169055565b5f516020615def5f395f51905f5255565b634e487b7160e01b5f52603160045260245ffd5b5f516020615eaf5f395f51905f52548015612dd9575f1901612e1f612db6825f516020615eaf5f395f51905f52612d55565b5f516020615eaf5f395f51905f5255565b6001600160e01b031981165f9081527f9195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c0460205260409020805460ff191690555f516020615def5f395f51905f5254905f5b828110612ec8575b506040516001600160e01b031990911681527f98eb65738803b92e5252c82c101f74513bea5f86a503594d3f36684fb726090b91508060208101612684565b612ed181612cfd565b90546001600160e01b031960039290921b1c60e01b811690831614612ef857600101612e81565b90612f6861268492612f4b612f45612f38612f337f98eb65738803b92e5252c82c101f74513bea5f86a503594d3f36684fb726090b98612d76565b612cfd565b90549060031b1c60e01b90565b91612cfd565b90919063ffffffff83549160031b9260e01c831b921b1916179055565b612f70612d84565b90612e89565b356001600160e01b0319811692919060048210612f91575050565b6001600160e01b031960049290920360031b82901b16169150565b92909160018403612fc3575050611ee19150613f1a565b60028403612fd7575050611ee19150613f5a565b6003840361300c57611ee193506004821061300457612fff91612ff991611dd5565b90612f76565b6143a7565b50505f6143a7565b505090600481145f1461303a57505f516020615e6f5f395f51905f52546001600160a01b0391821691161490565b60088114801561306a575b15613064576001600160a01b0361305c819261434d565b921691161490565b50505f90565b5060098114613045565b6001600160a01b038116806130a95750507f000000000000000000000000000000000000000000000000000000000000000090565b6130b282613f1a565b156130bb575090565b63342cf00f60e11b5f5260045260245ffd5b91909160408184031261024a57805192602082015167ffffffffffffffff811161024a57611ee192016122f5565b611ee194926001600160a01b0360609316825260208201528160408201520191612361565b5f516020615f2f5f395f51905f52549293926001600160a01b03168061314e575090611ee191933691612026565b604051637a0468b760e01b8152945f938693849283926131729233600486016130fb565b03915afa918215610599575f905f9361318a57509190565b90506103b39192503d805f833e6131a18183611eaa565b8101906130cd565b6001600160a01b03611ee1959360609383521660208201528160408201520191612361565b9290916014830136811161024a57833560601c603485019136831161024a57359136605487011161024a573560e01c916038860193838701966038880136811161024a573660588a011161024a573560e01c9788603c8201910136603c82011161024a576132759a61327f8861325787876132849960048f986109809b60389103010191611e1d565b9e909e9d8061326f6104ee611f44611f3e848c611daa565b97611db8565b949093898b6143df565b614453565b6132d057303b1561024a576132af5f936040519586948594639517e29f60e01b8652600486016131a9565b038134305af18015610599576132c25750565b80610b855f61034793611eaa565b6346fdc33360e01b5f5260045ffd5b92916001600160a01b036133076001600160a01b035f516020615e2f5f395f51905f52541690565b1680613317575050610100015190565b60405163e24f8f9360e01b815260606004820152945f9386938492869284929190613346906064850190612199565b916024840152604483015203925af1918215610599575f905f9361318a57509190565b60015f525f516020615e4f5f395f51905f526020525f516020615e8f5f395f51905f52546001600160a01b03161515806133a05790565b5060015f525f516020615ecf5f395f51905f526020527fea7b7a702bfdbb752f6ea9baf36f52e2d0036c56b8cb9e1bd5f570a0e63be7f5546001600160a01b0316151590565b9190811015612cf85760051b0190565b156133fd57565b633aab01a760e11b5f5260045ffd5b1561341357565b633ab3447f60e11b5f5260045ffd5b1561342957565b63bf6b584360e01b5f5260045ffd5b6020916001600160a01b039161351961353a958061345f6104ee611f44611f3e8489611daa565b9461351461350761349361347288612523565b60608c8a0135996134866040820182612157565b92909101359a8b9361488a565b966134da6134d56109806134ce845f527f9195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c0a60205260405f2090565b5460ff1690565b61340c565b5f527f9195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c0a60205260405f2090565b805460ff19166001179055565b611db8565b604051637aa8f17760e11b81529687958694909385939130600486016130fb565b0392165afa801561059957610347915f91613569575b506001600160e01b031916630b135d3f60e11b14613422565b613582915060203d602011611fc657611fb78183611eaa565b5f613550565b916020611ee1938181520191612361565b916135bf906001600160a01b03611ee19593168452606060208501526060840190611123565b916040818403910152611123565b919291906004810361369a57506135e35f613822565b61361e5a604051638a91b0e360e01b6020820152906136188261360a878960248401613588565b03601f198101845283611eaa565b836149c0565b93901561362c575b50505050565b7fb6847a3240c9f4a4bedda5dac3ad17fe3eed74aec7c32aac50b131e7c893bd9b9361368261368e92613674604051968792638a91b0e360e01b602085015260248401613588565b03601f198101865285611eaa565b60405193849384613599565b0390a15f808080613626565b82846008831480156136c6575b6136b4575b5050506135e3565b6136be9284614903565b5f82846136ac565b50600983146136a7565b5f516020615eaf5f395f51905f525490600160401b821015611ea557612f4b82600161034794015f516020615eaf5f395f51905f52555f516020615eaf5f395f51905f52612d55565b6001600160e01b031981165f9081527f9195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c0460205260409020805460ff191660011790555f516020615def5f395f51905f5254600160401b811015611ea557816137c87f5daa3de47b1e487939a83a2b82cc20cc90ba74a30933b87eb780462db05db83693612f4b846001602096015f516020615def5f395f51905f52555f516020615def5f395f51905f52612d55565b6040516001600160e01b03199091168152a1565b60409081516137eb8382611eaa565b60088152675374617274616c6560c01b60208201529161380d81519182611eaa565b60058152640312e302e360dc1b602082015290565b6001600160a01b03166001600160a01b03195f516020615e6f5f395f51905f525416175f516020615e6f5f395f51905f5255565b9190613865612ff98383611dd5565b926138a1613871611ffb565b5f81525f602082015261085d8663ffffffff60e01b165f525f516020615f0f5f395f51905f5260205260405f2090565b5f516020615eaf5f395f51905f52546001600160e01b0319909416935f5b818110613961575b5050909192506139006136185a6138df868087611de3565b604051638a91b0e360e01b60208201529391849161360a9160248401613588565b93901561390d5750505050565b7fb6847a3240c9f4a4bedda5dac3ad17fe3eed74aec7c32aac50b131e7c893bd9b936139408261368e9361368296611de3565b604051638a91b0e360e01b6020820152959186916136749160248401613588565b8561397e613971612f3884612ca0565b6001600160e01b03191690565b1461398b576001016138bf565b906139b192939495506139ab612f386139a6612f4b93612d76565b612ca0565b91612ca0565b6139b9612ded565b9082915f806138c7565b91909160408184031261024a5780356139db8161032b565b92602082013567ffffffffffffffff811161024a57611ee1920161205c565b90613a10906001600160a01b03938101906139c3565b92166001600160a01b03821680158015613bb8575b613b9c576001600160a01b0382165f525f516020615ecf5f395f51905f526020526001600160a01b0360405f20541603613b8057613acb90613ab0613a8b610f91855f516020615ecf5f395f51905f52906001600160a01b03165f5260205260405f2090565b915f516020615ecf5f395f51905f52906001600160a01b03165f5260205260405f2090565b906001600160a01b03166001600160a01b0319825416179055565b613b06613af6825f516020615ecf5f395f51905f52906001600160a01b03165f5260205260405f2090565b80546001600160a01b0319169055565b613b2c5a604051638a91b0e360e01b6020820152906136188261360a87602483016123a7565b919015613b3857505050565b612684613674926136827fb6847a3240c9f4a4bedda5dac3ad17fe3eed74aec7c32aac50b131e7c893bd9b95604051958691638a91b0e360e01b6020840152602483016123a7565b637c84ecfb60e01b5f526001600160a01b03821660045260245ffd5b6001600160a01b0382637c84ecfb60e01b5f521660045260245ffd5b5060018114613a25565b90613bd8906001600160a01b03938101906139c3565b92166001600160a01b03821680158015613ca3575b613b9c576001600160a01b0382165f525f516020615e4f5f395f51905f526020526001600160a01b0360405f20541603613b8057613c7890613ab0613c53610f91855f516020615e4f5f395f51905f52906001600160a01b03165f5260205260405f2090565b915f516020615e4f5f395f51905f52906001600160a01b03165f5260205260405f2090565b613b06613af6825f516020615e4f5f395f51905f52906001600160a01b03165f5260205260405f2090565b5060018114613bed565b613cb8610980614782565b80613da5575b613cc457565b60015f525f516020615e4f5f395f51905f52602052613cef5f516020615e8f5f395f51905f52610f91565b6001600160a01b03811680151580613d9a575b15613d895760405163d60b347f60e01b815230600482015290602090829060249082905afa908115610599575f91613d6b575b50613d4857613d4390613ed5565b613cef565b6001600160a01b036001915b1614613d5c57565b63330c676160e21b5f5260045ffd5b613d83915060203d81116122ee576122e08183611eaa565b5f613d35565b506001600160a01b03600191613d54565b506001811415613d02565b5060405163d60b347f60e01b81523060048201526020816024817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa908115610599575f91613e00575b5015613cbe565b613e19915060203d6020116122ee576122e08183611eaa565b5f613df9565b613e4f936001600160a01b0360209496939660405196879586948593637aa8f17760e11b855233600486016130fb565b0392165afa908115610599575f91613eb6575b507fffff000000000000000000000000000000000000000000000000000000000000811661773960f01b1480613ea0575b613e9b575090565b905090565b506001600160e01b031982811690821611613e93565b613ecf915060203d602011611fc657611fb78183611eaa565b5f613e62565b6001600160a01b03168015613f08575f525f516020615e4f5f395f51905f526020526001600160a01b0360405f20541690565b637c84ecfb60e01b5f5260045260245ffd5b6001600160a01b031680600114159081613f32575090565b90505f525f516020615e4f5f395f51905f526020526001600160a01b0360405f205416151590565b6001600160a01b031680600114159081613f72575090565b90505f525f516020615ecf5f395f51905f526020526001600160a01b0360405f205416151590565b67ffffffffffffffff8111611ea55760051b60200190565b60408051909190613fc38382611eaa565b6001815291601f1901825f5b828110613fdb57505050565b806060602080938501015201613fcf565b90613ff682613f9a565b6140036040519182611eaa565b8281528092614014601f1991613f9a565b01905f5b82811061402457505050565b806060602080938501015201614018565b805115612cf85760200190565b8051821015612cf85760209160051b010190565b91611ee1939161406e91604085526040850191612361565b916020818403910152611123565b90614086916156ba565b916001600160f81b0319811661410357506140a082613fec565b915f5b8181106140b05750505090565b806140e76140c1600193858761573a565b80356140cc8161032b565b6140df6020830135926040810190612157565b929091615866565b6140f18287614042565b526140fc8186614042565b50016140a3565b9291906001600160f81b03198416600160f81b0361412657611ee192935061575c565b6308c3ee0360e11b5f9081526001600160f81b03198516600452602490fd5b9291611ee194926001600160a01b036135bf93168552606060208601526060850191612361565b9061417991939293615817565b91614185959395613fb2565b956001600160f81b031985166141b55761419f9450615866565b6141a883614035565b526141b282614035565b50565b92939192916001600160f81b03198116600160f81b036129eb575083836141dc928461583f565b6141e587614035565b52156141f057505050565b6126847f4b44f876ced2ce5c5dc854622334777a5e68b7307b90aa55cd9e566b24918c389361421e87614035565b519060405194859485614145565b90614236916156ba565b90916001600160f81b0319811661429357505f5b81811061425657505050565b8061428d614267600193858761573a565b80356142728161032b565b6142856020830135926040810190612157565b929091615893565b0161424a565b92916001600160f81b03198416600160f81b03614126576141b292935061575c565b906142bf91615817565b6001600160f81b03199094169392909190846142df576103479450615893565b9293919291600160f81b810361433b575083836142fc928461583f565b9390156143095750505050565b7f4b44f876ced2ce5c5dc854622334777a5e68b7307b90aa55cd9e566b24918c389361368e9160405194859485614145565b6308c3ee0360e11b5f5260045260245ffd5b6008810361437157506001600160a01b035f516020615f2f5f395f51905f52541690565b6009810361439557506001600160a01b035f516020615e2f5f395f51905f52541690565b630f64246160e41b5f5260045260245ffd5b6001600160a01b036143d7819263ffffffff60e01b165f525f516020615f0f5f395f51905f5260205260405f2090565b541691161490565b93926143ed91933691612026565b6020815191012090604051926001600160a01b0360208501957ff6c866c1cd985ce61f030431e576c0e82887de0643dfa8a2e6efc3463e638ed087521660408501526060840152608083015260a082015260a0815261444d60c082611eaa565b51902090565b92602092916001600160a01b0361446c61448a966158dc565b604051637aa8f17760e11b81529687958694859330600486016130fb565b0392165afa5f91816144b7575b506144a157505f90565b6001600160e01b031916630b135d3f60e11b1490565b6144d191925060203d602011611fc657611fb78183611eaa565b905f614497565b6001600160a01b031680156141b25760407f341347516a9de374859dfda710fa4828b2d48cb57d4fbe4c1149612b8e02276e916145156008615adc565b815190600882526020820152a1565b6001600160a01b031680156141b25760407f341347516a9de374859dfda710fa4828b2d48cb57d4fbe4c1149612b8e02276e916145616009615adc565b815190600982526020820152a1565b5f516020615eaf5f395f51905f52545f5f516020615eaf5f395f51905f5255806145975750565b5f516020615eaf5f395f51905f525f5260070160031c7f83f9b619edc9f43576821d856bc19cf4dff9f52048e1eda1b7c8f88ea11af5ea908101905b8181106145de575050565b5f81556001016145d3565b5f516020615def5f395f51905f52545f5b81811061467c5750505f516020615def5f395f51905f52545f5f516020615def5f395f51905f52558061462a5750565b5f516020615def5f395f51905f525f5260070160031c7f03091a1950aec911b7d69775d400f97274a68b1ca29a0c9bfcd94d200ed924b6908101905b818110614671575050565b5f8155600101614666565b8061469a61468b600193612cfd565b90549060031b1c60e01b612e30565b016145fa565b60015f525f516020615ecf5f395f51905f526020527fea7b7a702bfdbb752f6ea9baf36f52e2d0036c56b8cb9e1bd5f570a0e63be7f5546001600160a01b03166147735760015f525f516020615ecf5f395f51905f5260205261471360405f2060016001600160a01b0319825416179055565b60015f525f516020615e4f5f395f51905f526020526001600160a01b035f516020615e8f5f395f51905f5254166147735760015f525f516020615e4f5f395f51905f5260205261034760405f2060016001600160a01b0319825416179055565b6329e42f3360e11b5f5260045ffd5b5f906017303b1461478f57565b905060035f80303c5f5160e81c62ef01001490565b5f516020615eef5f395f51905f52545f5b81811015614810575f516020615eef5f395f51905f525f525f516020615e4f5f395f51905f52817fdb3901c0862740f848a4aebebd6b3d645e6b3bc6adf2cf46e83a846b3a34393301541461480c576001016147b5565b5050565b50600160401b811015611ea557600181015f516020615eef5f395f51905f52555f516020615eef5f395f51905f5254811015612cf8575f516020615eef5f395f51905f525f527fdb3901c0862740f848a4aebebd6b3d645e6b3bc6adf2cf46e83a846b3a343933015f516020615e4f5f395f51905f529055565b92611ee194919261489c913691612026565b60208151910120604051926001600160a01b0360208501957fd3ddfc12654178cc44d4a7b6b969cfdce7ffe6342326ba37825314cffa0fba9c87521660408501526060840152608083015260a082015260a081526148fb60c082611eaa565b5190206158dc565b6001600160a01b03909392936149195f93615adc565b1691823b1561024a57604051638a91b0e360e01b8152602060048201525f818061494760248201868a612361565b038183885af19081614999575b50613626577f55ee8ee9d8f2c5f3d998f93aa8be15e22a0d662c816d6390a6f79a9d88520d969361268491604051948594508452604060208501526040840191612361565b6149a69193505f90611eaa565b5f915f614954565b6001600160a01b036103479116613822565b604051939260209291906149d48487611eaa565b5f86525f928380936020890196601f190136883760208451940192f1903d9081614a03575b5f908286523e9190565b5f91506149f9565b90614a1582613f9a565b614a226040519182611eaa565b8281528092614a33601f1991613f9a565b0190602036910137565b5f198114611da55760010190565b90821015612cf8576103b39160051b810190612157565b9150614a6d90615bbe565b929391808403614b59575f5b818110614a8857505050505050565b80614a9660019284896133e6565b35828103614aba5750614ab4614aad828887614a4b565b9087615509565b01614a79565b60028103614add5750614ad8614ad1828887614a4b565b9087615409565b614ab4565b60038103614afb5750614ad8614af4828887614a4b565b9087614e74565b60048103614b195750614ad8614b12828887614a4b565b9087614d20565b85600882148015614b4f575b614b31575b5050614ab4565b614b4891614b40848a89614a4b565b929091614b68565b5f85614b2a565b5060098214614b25565b63b4fa3fb360e01b5f5260045ffd5b9291906001600160a01b03614b916001600160a01b035f516020615e6f5f395f51905f52541690565b1680614ba1575061034793614c42565b60405163d68f602560e01b815293909290915f8580614bc536343360048501612381565b038183885af1948515610599575f95614c22575b50614be5939495614c42565b803b1561024a57604051630b9dfbed60e11b8152915f918391829084908290614c1190600483016123a7565b03925af18015610599576132c25750565b614be5949550614c3b903d805f833e610ba48183611eaa565b9493614bd9565b60405163ecd0596160e01b8152600481018290526001600160a01b03831694929190602081602481895afa908115610599575f91614d01575b5015614cf257614c8a8161434d565b6001600160a01b038116614cd7575090614ca391615b2a565b80614cad57505050565b823b1561024a57614c11925f92836040518096819582946306d61fe760e41b845260048401613588565b63c689cd9760e01b5f526001600160a01b031660045260245ffd5b631c4f83bb60e31b5f5260045ffd5b614d1a915060203d6020116122ee576122e08183611eaa565b5f614c7b565b91906001600160a01b03614d486001600160a01b035f516020615e6f5f395f51905f52541690565b1680614d58575061034792614dde565b60405163d68f602560e01b81529290915f8480614d7a36343360048501612381565b038183875af1938415610599575f94614d9a575b50614be5929394614dde565b614be5939450614db3903d805f833e610ba48183611eaa565b9392614d8e565b15614dc25750565b6001600160a01b039063741cbe0360e01b5f521660045260245ffd5b60405163ecd0596160e01b81526004808201526001600160a01b038216939190602081602481885afa908115610599575f91614e55575b5015614cf257614ca390614e50614e406001600160a01b035f516020615e6f5f395f51905f52541690565b6001600160a01b03811615614dba565b6149ae565b614e6e915060203d6020116122ee576122e08183611eaa565b5f614e15565b91906001600160a01b03614e9c6001600160a01b035f516020615e6f5f395f51905f52541690565b1680614eac575061034792614f6c565b60405163d68f602560e01b81529290915f8480614ece36343360048501612381565b038183875af1938415610599575f94614eee575b50614be5929394614f6c565b614be5939450614f07903d805f833e610ba48183611eaa565b9392614ee2565b9060041015612cf85760040190565b15614f2457565b63867a1dcf60e01b5f5260045ffd5b15614f3a57565b63c001660b60e01b5f5260045ffd5b15614f515750565b63a56a04dd60e01b5f5263ffffffff60e01b1660045260245ffd5b60405163ecd0596160e01b81526003600482015291926001600160a01b03821692909190602081602481875afa908115610599575f916153ea575b5015614cf2576151cd849161516561501a6105ba8680614ff8614feb614fdd83614fd7612ff96151d29e8e611dd5565b9b614f0e565b356001600160f81b03191690565b6001600160f81b03191690565b9a6001600160f81b03198c161580156153d3575b61501590614f1d565b611e00565b966150f86001600160e01b031986166306d61fe760e41b81149081156153c2575b81156153b1575b81156153a0575b811561538f575b811561537e575b811561536d575b811561535c575b811561534b575b811561533a575b8115615329575b8115615318575b8115615307575b81156152f6575b81156152e5575b81156152d4575b81156152c3575b81156152b2575b81156152a1575b8115615290575b811561527f575b811561526e575b811561525d575b811561524c575b811561523b575b811561522a575b8115615219575b8115615208575b5015614f33565b61513a85615135610980826001600160e01b0319165f9081525f516020615f0f5f395f51905f5260205260409020546001600160a01b0316151590565b614f49565b615154615145611ffb565b6001600160a01b039094168452565b6001600160f81b0319166020830152565b6001600160e01b031983165f9081525f516020615f0f5f395f51905f52602052604090208151815460209093015160ff60a01b60589190911c1674ffffffffffffffffffffffffffffffffffffffffff199093166001600160a01b0390911617919091179055565b6136d0565b81516151dc575050565b803b1561024a576040516306d61fe760e41b8152915f918391829084908290614c1190600483016123a7565b63112d3a7d60e01b1490505f6150f1565b6314e2ec7560e31b811491506150ea565b639517e29f60e01b811491506150e3565b6335a4725960e21b811491506150dc565b63e9ae5c5360e01b811491506150d5565b639cfd7cff60e01b811491506150ce565b63340f1e4560e21b811491506150c7565b63f2dc691d60e01b811491506150c0565b634b6a141960e01b811491506150b9565b630b135d3f60e11b811491506150b2565b638dd7712f60e01b811491506150ab565b63b760faf960e01b811491506150a4565b6314add44b60e21b8114915061509d565b6306608bdf60e21b81149150615096565b632b870d1b60e11b8114915061508f565b63ee21942360e01b81149150615088565b637aa8f17760e11b81149150615081565b639700320360e01b8114915061507a565b630b9dfbed60e11b81149150615073565b63d68f602560e01b8114915061506c565b637aa8f17760e11b81149150615065565b639700320360e01b8114915061505e565b63e24f8f9360e01b81149150615057565b637a0468b760e01b81149150615050565b63d60b347f60e01b81149150615049565b63ecd0596160e01b81149150615042565b638a91b0e360e01b8114915061503b565b50607f60f91b6001600160f81b03198d161461500c565b615403915060203d6020116122ee576122e08183611eaa565b5f614fa7565b91906001600160a01b036154316001600160a01b035f516020615e6f5f395f51905f52541690565b16806154415750610347926154a3565b60405163d68f602560e01b81529290915f848061546336343360048501612381565b038183875af1938415610599575f94615483575b50614be59293946154a3565b614be593945061549c903d805f833e610ba48183611eaa565b9392615477565b60405163ecd0596160e01b8152600260048201526001600160a01b038216939190602081602481885afa908115610599575f916154ea575b5015614cf257614ca390615c19565b615503915060203d6020116122ee576122e08183611eaa565b5f6154db565b91906001600160a01b036155316001600160a01b035f516020615e6f5f395f51905f52541690565b16806155415750610347926155a3565b60405163d68f602560e01b81529290915f848061556336343360048501612381565b038183875af1938415610599575f94615583575b50614be59293946155a3565b614be593945061559c903d805f833e610ba48183611eaa565b9392615577565b60405163ecd0596160e01b8152600160048201526001600160a01b038216939190602081602481885afa908115610599575f91615629575b5015614cf2576001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016841461561a57614ca390615d24565b63abc3af7960e01b5f5260045ffd5b615642915060203d6020116122ee576122e08183611eaa565b5f6155db565b918160141161024a57823560601c92601401916013190190565b5f9192806040519485378338925af4913d82523d5f602084013e60203d830101604052565b5f919392806040519586378438925af4156156b1573d82523d5f602084013e60203d830101604052565b503d5f823e3d90fd5b909181359182810193601f199101016020840193803593828560051b8301119060401c1761572d57836156eb575050565b835b5f190160208160051b8301013580830160608101908135809101918680602080860135809601011191111792171760401c1761572d57806156ed57505050565b63ba597e7e5f526004601cfd5b9190811015612cf85760051b81013590605e198136030182121561024a570190565b91909161576883613fec565b925f5b81811061577757505050565b80615785600192848661573a565b80356157908161032b565b60408201906157ae60208401356157a78486612157565b918461583f565b6157b8868c614042565b52156157c8575b5050500161576b565b6157ff61580c927f4b44f876ced2ce5c5dc854622334777a5e68b7307b90aa55cd9e566b24918c38946157fa8461032b565b612157565b61421e868c959395614042565b0390a15f80806157bf565b908060141161024a57813560601c926034821061024a57601483013592603401916033190190565b905f928491604051958692833738935af1913d82523d5f602084013e60203d830101604052565b90925f92819594604051968792833738935af1156156b1573d82523d5f602084013e60203d830101604052565b8380935f93604051958692833738935af1156124e65701604052565b60405190602036830101604052816014360181525f602036920137604051601481016040523360601b9052565b7f00000000000000000000000000000000000000000000000000000000000000007f000000000000000000000000000000000000000000000000000000000000000030147f000000000000000000000000000000000000000000000000000000000000000046141615615967575b6719010000000000005f52601a52603a526042601820905f603a52565b5060a06040517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f81527f000000000000000000000000000000000000000000000000000000000000000060208201527f000000000000000000000000000000000000000000000000000000000000000060408201524660608201523060808201522061594a565b60015f525f516020615e4f5f395f51905f5260208190525f516020615e8f5f395f51905f52546001600160a01b03165b6001600160a01b0381169081156129b5575f91825260208390526040808320546001600160a01b039283168452922080546001600160a01b031916905516615a1e565b60015f525f516020615ecf5f395f51905f5260208190527fea7b7a702bfdbb752f6ea9baf36f52e2d0036c56b8cb9e1bd5f570a0e63be7f5546001600160a01b03168080156129b5575f91825260208390526040808320546001600160a01b039283168452922080546001600160a01b031916905516615a1e565b60088103615b0357505f516020615f2f5f395f51905f5280546001600160a01b0319169055565b6009810361439557505f516020615e2f5f395f51905f5280546001600160a01b0319169055565b60088103615b7457506001600160a01b0361034791166001600160a01b03166001600160a01b03195f516020615f2f5f395f51905f525416175f516020615f2f5f395f51905f5255565b6009810361439557506001600160a01b0361034791166001600160a01b03166001600160a01b03195f516020615e2f5f395f51905f525416175f516020615e2f5f395f51905f5255565b602081019136831161024a5781358201916020830136811161024a5793833593602036918660051b01011161024a5736604083011161024a5735016020810136811161024a5791813591602036918460051b01011161024a57565b6001600160a01b03811680158015615d1a575b613f08575f9081525f516020615ecf5f395f51905f5260205260409020546001600160a01b0316615cff5760015f525f516020615ecf5f395f51905f5260205261034790615cc4615c9c7fea7b7a702bfdbb752f6ea9baf36f52e2d0036c56b8cb9e1bd5f570a0e63be7f5610f91565b613ab0835f516020615ecf5f395f51905f52906001600160a01b03165f5260205260405f2090565b60015f525f516020615ecf5f395f51905f526020527fea7b7a702bfdbb752f6ea9baf36f52e2d0036c56b8cb9e1bd5f570a0e63be7f5613ab0565b631034f46960e21b5f526001600160a01b031660045260245ffd5b5060018114615c2c565b6001600160a01b03811680158015615de4575b613f08575f9081525f516020615e4f5f395f51905f5260205260409020546001600160a01b0316615cff5760015f525f516020615e4f5f395f51905f5260205261034790615dbc615d945f516020615e8f5f395f51905f52610f91565b613ab0835f516020615e4f5f395f51905f52906001600160a01b03165f5260205260405f2090565b60015f525f516020615e4f5f395f51905f526020525f516020615e8f5f395f51905f52613ab0565b5060018114615d3756fe9195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c05d21d0b289f126c4b473ea641963e766833c2f13866e4ff480abd787c100ef1239195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c089195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c009195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c06996a594045e3ca684f704b1cf5a45553b38f5c17dfaeb834fd728d4924f4bf179195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c039195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c01c473de86d0138e06e4d4918a106463a7cc005258d2e21915272bcb4594c189009195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c029195d48440658ac27f13a7bd256a2e74da1f2416f468d66228b37e6ac4790c09';

    // Load environment variables
    address defaultECDSAValidator = vm.envAddress('DEFAULT_ECDSA_VALIDATOR');
    bytes memory initData = abi.encodePacked(eEeEeAddress);

    bytes memory constructorArgs = abi.encode(entryPoint, defaultECDSAValidator, initData);

    // Concatenate bytecode + constructor arguments
    bytes memory finalBytecode = abi.encodePacked(deployedBytecode, constructorArgs);

    // Deploy contract if needed
    deployGeneric(deployerPrivateKey, saltString, finalBytecode, contractName);
  }

  function deployGeneric(
    uint256 deployerPrivateKey,
    string memory saltString,
    bytes memory finalBytecode,
    string memory contractName
  ) public {
    // Compute derived salt
    bytes32 derivedSalt = keccak256(abi.encodePacked(saltString));

    // Compute contract address before deployment
    address computedAddress = deployerInstance.addressOf(derivedSalt);

    console.log(string(abi.encodePacked(contractName, ' Computed Address:')), computedAddress);

    // Check if contract is already deployed
    uint256 codeSize;
    assembly {
      codeSize := extcodesize(computedAddress)
    }

    if (codeSize == 0) {
      console.log(string(abi.encodePacked(contractName, ' not deployed, deploying now...')));
      deployContract(deployerPrivateKey, derivedSalt, finalBytecode, contractName, computedAddress);
    } else {
      console.log(string(abi.encodePacked(contractName, ' already deployed at:')), computedAddress);
    }
  }

  function deployContract(
    uint256 deployerPrivateKey,
    bytes32 derivedSalt,
    bytes memory finalBytecode,
    string memory contractName,
    address computedAddress
  ) internal {
    uint256 chainId = block.chainid;

    uint256 gasPrice = DEPLOYMENT_CHAIN_GAS_PRICES[chainId];
    require(gasPrice > 0, NoGasPriceSet());

    console.log('Using gas price:', gasPrice);

    // Deploy contract using deployer's private key
    vm.startBroadcast(deployerPrivateKey);
    (bool success,) =
      address(deployerInstance).call(abi.encodeWithSignature('deploy(bytes32,bytes)', derivedSalt, finalBytecode));
    vm.stopBroadcast();

    require(success, ContractDeploymentFailed());

    console.log(string(abi.encodePacked('Transaction success: ', contractName)));

    // Verify deployment by checking contract existence
    uint256 codeSize;
    assembly {
      codeSize := extcodesize(computedAddress)
    }

    if (codeSize == 0) {
      console.log(string(abi.encodePacked('Invalid deployment of ', contractName)));
    } else {
      console.log(string(abi.encodePacked(contractName, ' Deployed Successfully at:')), computedAddress);
    }
  }
}
